"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[576],{1576:(ht,_,l)=>{l.r(_),l.d(_,{DashboardModule:()=>vt});var p=l(9808),k=l(3075),f=l(464),a=l(7587),m=l(1891),v=l(5787),d=l(4119);let X=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[p.ez,m.Bz,v.T,d.z,m.Bz,d.z]}),t})();var ee=l(2653),te=l(845),ne=l(3986);let Ze=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[p.ez,m.Bz,d.z,m.Bz,d.z]}),t})();var Re=l(5861),c=l(2340),M=l(520),$e=l(2132),Ve=l(8568),I=l(9783),ze=l(4990),Ne=l(7579),Be=l(8306),T=l(8874);let je=(()=>{class t{constructor(e){this.authService=e,this.connectionSubject=new Ne.x,this.stompClient=new ze.K({brokerURL:c.N.backendApiUrl+"/ws?token="+this.authService.getToken(),debug:n=>console.log(n),reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3}),this.stompClient.onConnect=n=>{console.log("Connected: "+n),this.stompClient.subscribe("/user/queue/notifications",s=>{console.log("Th\xf4ng b\xe1o c\xe1 nh\xe2n:",s.body)}),this.stompClient.subscribe("/topic/public",s=>{console.log("Th\xf4ng b\xe1o chung:",s.body)})},this.stompClient.onDisconnect=()=>{console.log("Disconnected!")}}connect(){this.stompClient.activate()}disconnect(){this.stompClient.deactivate()}onConnected(){return this.connectionSubject.asObservable()}sendMessage(e,n){this.stompClient.connected&&this.stompClient.publish({destination:e,body:JSON.stringify(n)})}subscribeToTopic(e){return new Be.y(n=>{this.stompClient.subscribe(e,s=>{n.next(s.body)})})}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(T.e))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=l(7773),qe=l(693);function Je(t,i){1&t&&a._UZ(0,"app-loading")}const g=function(){return{width:"2.5rem",height:"2.5rem"}};let Qe=(()=>{class t{constructor(e,n,s,r,o){this.layoutService=e,this.messageService=n,this.websocketService=s,this.authService=r,this.http=o,this.loading=!1,this.totalRevenueToday=0,this.totalOrderDoneToday=0,this.totalOrderUnconfirmToday=0,this.totalOrderPreparingToday=0,this.dataChartByDay=[],this.dataChartByMonth=[],this.chartLabelDay=[],this.chartLabelMonth=[],this.chartDataDay=[],this.chartDataMonth=[]}ngOnInit(){this.header=(new M.WM).set($e.ds.AUTHORIZATION,this.authService.getToken()),this.loadData()}loadData(){var e=this;return(0,Re.Z)(function*(){e.loading=!0,yield e.http.get(c.N.backendApiUrl+"/api/v1/project/order/getTotalRevenueToday",{headers:e.header}).toPromise().then(n=>{0==(null==n?void 0:n.resultCode)?e.totalRevenueToday=null==n.data?0:n.data:e.messageService.add({severity:"error",summary:null==n?void 0:n.message}),console.log(n)},n=>{e.messageService.add({severity:"error",summary:"Error occur"})}),yield e.http.get(c.N.backendApiUrl+"/api/v1/project/order/getTotalDoneOrdersToday",{headers:e.header}).toPromise().then(n=>{0==(null==n?void 0:n.resultCode)?e.totalOrderDoneToday=n.data:e.messageService.add({severity:"error",summary:null==n?void 0:n.message}),console.log(n)},n=>{e.messageService.add({severity:"error",summary:"Error occur"})}),yield e.http.get(c.N.backendApiUrl+"/api/v1/project/order/getTotalPreparingOrdersToday",{headers:e.header}).toPromise().then(n=>{0==(null==n?void 0:n.resultCode)?e.totalOrderPreparingToday=n.data:e.messageService.add({severity:"error",summary:null==n?void 0:n.message}),console.log(n)},n=>{e.messageService.add({severity:"error",summary:"Error occur"})}),yield e.http.get(c.N.backendApiUrl+"/api/v1/project/order/getTotalUnConfirmOrdersToday",{headers:e.header}).toPromise().then(n=>{0==(null==n?void 0:n.resultCode)?e.totalOrderUnconfirmToday=n.data:e.messageService.add({severity:"error",summary:null==n?void 0:n.message}),console.log(n)},n=>{e.messageService.add({severity:"error",summary:"Error occur"})}),yield e.http.get(c.N.backendApiUrl+"/api/v1/project/order/getTotalRevenueLastDays?day=7",{headers:e.header}).toPromise().then(n=>{0==(null==n?void 0:n.resultCode)?(e.dataChartByDay=n.data,e.initChartByDay()):e.messageService.add({severity:"error",summary:null==n?void 0:n.message}),console.log(n)},n=>{e.messageService.add({severity:"error",summary:"Error occur"})}),yield e.http.get(c.N.backendApiUrl+"/api/v1/project/order/getTotalRevenueLastMonths?month=12",{headers:e.header}).toPromise().then(n=>{0==(null==n?void 0:n.resultCode)?(e.dataChartByMonth=n.data,e.initChartByMonth()):e.messageService.add({severity:"error",summary:null==n?void 0:n.message}),console.log(n)},n=>{e.messageService.add({severity:"error",summary:"Error occur"})}),e.loading=!1})()}initChartByDay(){const e=getComputedStyle(document.documentElement),n=e.getPropertyValue("--text-color"),s=e.getPropertyValue("--text-color-secondary"),r=e.getPropertyValue("--surface-border");this.chartDataDay=[],this.chartLabelDay=[];for(let o=0;o<this.dataChartByDay.length;o++)this.chartLabelDay.push(this.dataChartByDay[o].orderDate),this.chartDataDay.push(this.dataChartByDay[o].totalRevenue);this.chartDay={labels:this.chartLabelDay,datasets:[{label:"Doanh s\u1ed1",data:this.chartDataDay,fill:!1,backgroundColor:e.getPropertyValue("--green-500"),borderColor:e.getPropertyValue("--green-500"),tension:.4}]},this.chartOptions={plugins:{legend:{labels:{color:n}}},scales:{x:{ticks:{color:s},grid:{color:r,drawBorder:!1}},y:{ticks:{color:s},grid:{color:r,drawBorder:!1}}}}}initChartByMonth(){const e=getComputedStyle(document.documentElement);this.chartDataMonth=[],this.chartLabelMonth=[];for(let n=0;n<this.dataChartByMonth.length;n++)this.chartLabelMonth.push(this.dataChartByMonth[n].orderMonth),this.chartDataMonth.push(this.dataChartByMonth[n].totalRevenue);this.chartMonth={labels:this.chartLabelMonth,datasets:[{label:"Doanh s\u1ed1",data:this.chartDataMonth,fill:!1,backgroundColor:e.getPropertyValue("--blue-500"),borderColor:e.getPropertyValue("--blue-500"),tension:.4}]},console.log(this.chartMonth),console.log(this.chartDay)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(Ve.P),a.Y36(I.ez),a.Y36(je),a.Y36(T.e),a.Y36(M.eN))},t.\u0275cmp=a.Xpm({type:t,selectors:[["ng-component"]],decls:62,vars:20,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12","lg:col-6","xl:col-3"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"pi","pi-shopping-cart","text-blue-500","text-xl"],[1,"text-500"],[1,"flex","align-items-center","justify-content-center","bg-orange-100","border-round",3,"ngStyle"],[1,"pi","pi-map-marker","text-orange-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-cyan-100","border-round",3,"ngStyle"],[1,"pi","pi-inbox","text-cyan-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-purple-100","border-round",3,"ngStyle"],[1,"pi","pi-comment","text-purple-500","text-xl"],[1,"col-12","xl:col-6"],[1,"card"],["type","line",3,"data","options"]],template:function(e,n){1&e&&(a._UZ(0,"p-toast"),a.YNc(1,Je,1,0,"app-loading",0),a.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div")(7,"span",5),a._uU(8,"T\u1ed5ng doanh thu"),a.qZA(),a.TgZ(9,"div",6),a._uU(10),a.ALo(11,"number"),a.qZA()(),a.TgZ(12,"div",7),a._UZ(13,"i",8),a.qZA()(),a.TgZ(14,"span",9),a._uU(15,"h\xf4m nay"),a.qZA()()(),a.TgZ(16,"div",2)(17,"div",3)(18,"div",4)(19,"div")(20,"span",5),a._uU(21,"\u0110\xe3 ho\xe0n th\xe0nh"),a.qZA(),a.TgZ(22,"div",6),a._uU(23),a.qZA()(),a.TgZ(24,"div",10),a._UZ(25,"i",11),a.qZA()(),a.TgZ(26,"span",9),a._uU(27,"\u0111\u01a1n h\xe0ng"),a.qZA()()(),a.TgZ(28,"div",2)(29,"div",3)(30,"div",4)(31,"div")(32,"span",5),a._uU(33,"\u0110ang chu\u1ea9n b\u1ecb"),a.qZA(),a.TgZ(34,"div",6),a._uU(35),a.qZA()(),a.TgZ(36,"div",12),a._UZ(37,"i",13),a.qZA()(),a.TgZ(38,"span",9),a._uU(39,"\u0111\u01a1n h\xe0ng"),a.qZA()()(),a.TgZ(40,"div",2)(41,"div",3)(42,"div",4)(43,"div")(44,"span",5),a._uU(45,"Ch\u01b0a x\xe1c nh\u1eadn"),a.qZA(),a.TgZ(46,"div",6),a._uU(47),a.qZA()(),a.TgZ(48,"div",14),a._UZ(49,"i",15),a.qZA()(),a.TgZ(50,"span",9),a._uU(51,"\u0111\u01a1n h\xe0ng"),a.qZA()()(),a.TgZ(52,"div",16)(53,"div",17)(54,"h5"),a._uU(55,"Doanh s\u1ed1 7 ng\xe0y"),a.qZA(),a._UZ(56,"p-chart",18),a.qZA()(),a.TgZ(57,"div",16)(58,"div",17)(59,"h5"),a._uU(60,"Doanh s\u1ed1 12 th\xe1ng"),a.qZA(),a._UZ(61,"p-chart",18),a.qZA()()()),2&e&&(a.xp6(1),a.Q6J("ngIf",n.loading),a.xp6(9),a.hij("",a.xi3(11,13,n.totalRevenueToday,"1.0-0")," VND"),a.xp6(2),a.Q6J("ngStyle",a.DdM(16,g)),a.xp6(11),a.Oqu(n.totalOrderDoneToday),a.xp6(1),a.Q6J("ngStyle",a.DdM(17,g)),a.xp6(11),a.Oqu(n.totalOrderPreparingToday),a.xp6(1),a.Q6J("ngStyle",a.DdM(18,g)),a.xp6(11),a.Oqu(n.totalOrderUnconfirmToday),a.xp6(1),a.Q6J("ngStyle",a.DdM(19,g)),a.xp6(8),a.Q6J("data",n.chartDay)("options",n.chartOptions),a.xp6(5),a.Q6J("data",n.chartMonth)("options",n.chartOptions))},dependencies:[p.O5,p.PC,f.C,S.FN,qe.N,p.JJ],encapsulation:2}),t})(),Ke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[m.Bz.forChild([{path:"",component:Qe}]),m.Bz]}),t})(),ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[p.ez,v.T]}),t})(),gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[p.ez]}),t})();var _t=l(3229),ft=l(3860);let vt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[I.ez],imports:[p.ez,k.u5,f.S,X,ee.U$,ne.l,Ze,te.hJ,Ke,S.EV,gt,ot,_t.aw,ft.PagesModule]}),t})()}}]);